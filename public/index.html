<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ホーム | 技術書どんぶらこ">
    <title>技術書どんぶらこ | ホーム</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <header></header>
    <main>
      <div class="container">
        <div class="river">
          <!-- Example Card -->
          <div class="card">
            <div class="top">
              <div class="title">Title</div>
              <div class="description">Description</div>
            </div>
            <div class="bottom">
              <div class="likes"></div>
              <div class="views"></div>
              <div class="icon"><img src="./" alt="アイコン"></div>
            </div>
          </div>
          <!-- Example Card End -->
        </div>
      </div>
    </main>
    <footer></footer>

    <script type="module">
      // ページが読み込まれたとき
      globalThis.onload = async () => {
        const river = document.querySelector(".river");
        const response = await fetch("/article?qiita=true&zenn=true&github=true");
        const resJson = await response.json();
        const articles = [...resJson.Qiita, ...resJson.Zenn];
        
        articles.forEach((article) => {
          const title = article.title;

          // zennはない
          const description = article.description; // 本文
          const summary = (description.substring(0, 50)).replace(/\n/g, '');

          river.insertAdjacentHTML(
            'beforeend', `<div class="card"><div class="title">${title}</div><div class="description">${summary}</div></div>`
          );
        });
      };
    </script>
  </body>
</html>